# SonarCloud configuration for Wigor Viewer project
# Organization and project identification
sonar.organization=zahamizaz
sonar.projectKey=ZahamIzaz_emploi_temps_cicd
sonar.projectName=Wigor Viewer - Emploi du temps CICD
sonar.projectVersion=2.0

# Language and version configuration
sonar.python.version=3.10

# Source code configuration
sonar.sources=.
sonar.tests=tests

# Source exclusions (directories and files to ignore)
sonar.exclusions=\
    .venv/**,\
    venv/**,\
    dist/**,\
    build/**,\
    tests/**,\
    **/__pycache__/**,\
    **/*.pyc,\
    htmlcov/**,\
    .pytest_cache/**,\
    .tox/**,\
    .mypy_cache/**,\
    *.egg-info/**,\
    node_modules/**,\
    .git/**,\
    .github/**,\
    .vscode/**,\
    .idea/**,\
    *.log,\
    *.tmp,\
    *.bak,\
    **/*_pb2.py,\
    **/migrations/**,\
    scripts/**,\
    fixtures/**,\
    _debug/**

# Test exclusions (additional exclusions for test analysis)
sonar.test.exclusions=\
    **/*_test.py,\
    **/test_*.py,\
    **/conftest.py,\
    test_regression.py

# Coverage configuration
sonar.python.coverage.reportPaths=coverage.xml
sonar.coverage.exclusions=\
    tests/**,\
    test_regression.py,\
    **/*_test.py,\
    **/test_*.py,\
    scripts/**,\
    build/**,\
    dist/**

# Test execution reports
sonar.python.xunit.reportPath=pytest-results.xml
sonar.junit.reportPaths=pytest-report.xml

# Code duplication exclusions
sonar.cpd.exclusions=\
    **/tests/**,\
    test_regression.py,\
    **/*_test.py,\
    **/test_*.py,\
    fixtures/**

# Import analysis
sonar.python.pylint.reportPaths=pylint-report.txt
sonar.python.bandit.reportPaths=bandit-report.json
sonar.python.flake8.reportPaths=flake8-report.txt

# Issue management - Ignore specific rules for specific files
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5

# Ignore string literals duplication in test files
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e1.resourceKey=**/test_*.py

# Ignore assertions in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S5754
sonar.issue.ignore.multicriteria.e2.resourceKey=**/tests/**

# Ignore TODO comments in development files
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S1135
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*_debug.py

# Ignore magic numbers in test files
sonar.issue.ignore.multicriteria.e4.ruleKey=python:S109
sonar.issue.ignore.multicriteria.e4.resourceKey=**/test_*.py

# Ignore unused imports in __init__.py files
sonar.issue.ignore.multicriteria.e5.ruleKey=python:F401
sonar.issue.ignore.multicriteria.e5.resourceKey=**/__init__.py

# Quality gate configuration
sonar.qualitygate.wait=true

# Branch analysis configuration
sonar.branch.name=${env.GITHUB_REF_NAME}
sonar.pullrequest.key=${env.GITHUB_PR_NUMBER}
sonar.pullrequest.branch=${env.GITHUB_HEAD_REF}
sonar.pullrequest.base=${env.GITHUB_BASE_REF}

# Additional metadata
sonar.links.homepage=https://github.com/ZahamIzaz/emploi_temps_cicd
sonar.links.ci=https://github.com/ZahamIzaz/emploi_temps_cicd/actions
sonar.links.scm=https://github.com/ZahamIzaz/emploi_temps_cicd
sonar.links.issue=https://github.com/ZahamIzaz/emploi_temps_cicd/issues

# Scanner configuration
sonar.sourceEncoding=UTF-8
sonar.scm.provider=git
sonar.scm.forceReloadAll=false

# Performance optimization
sonar.scanner.dumpToFile=
sonar.scanner.metadataFilePath=
sonar.log.level=INFO

# Analysis scope
sonar.inclusions=\
    **/*.py,\
    *.py,\
    **/*.pyx,\
    requirements*.txt,\
    *.cfg,\
    *.ini,\
    *.toml,\
    Dockerfile,\
    *.yml,\
    *.yaml,\
    *.json

# File size limits
sonar.exclusions.filesize.limit=1000000